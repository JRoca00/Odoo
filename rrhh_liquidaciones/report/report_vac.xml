<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="vac_report">  
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <t t-foreach="docs" t-as="doc">
                        <div class="page">
                            <tr>
                                <td colspan="2">
                                    <p style="display: block; margin-bottom: 15px; font-size: 15px; text-align: center; color: blue;">LIQUIDACIÓN DE VACACIONES</p>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <p style="display: block; margin-bottom: 10px; font-size: 15px; text-align: left;"><b>Referencia:</b> <t t-esc="doc.name"/></p>
                                </td>
                            </tr>
                            <tr>
                                <div style="float: left;">
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 10px; font-size: 15px;"><b>Empresa:</b> <t t-esc="doc.employeeid.address_id.name"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>Código Trabajador:</b> <t t-esc="doc.employeeid.barcode"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>Nombre:</b> <t t-esc="doc.employeeid.name"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>Puesto:</b> <t t-esc="doc.employeeid.contract_ids.name"/></p>
                                    </td>
                                    
                                </div>
                                <div style="float: right;">
                                    <td colspan="2">
                                        <t t-set="current_date" t-value="datetime.datetime.now()"/>
                                        <h6 style="display: block; margin-bottom: 10px; text-align: left;  width: 98%;"><b>Fecha:</b>   
                                        <t t-esc="current_date.strftime('%d / ')"/>
                                        <t t-esc="current_date.strftime('%m / %Y')"/></h6>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>Inicio Laboral:</b> <t t-esc="doc.employeeid.contract_ids.date_start.strftime('%d / %m / %Y')"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 45px; font-size: 15px;"><b>Periodo:</b> <t t-esc="doc.period"/></p>
                                    </td>

                                </div>
                            </tr>
                            <tr>
                                <div style="clear: both;">
                                    <td colspan="2">
                                        <td colspan="2">
                                            <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>VACACIONES</b></p>
                                        </td>
                                        <td colspan="2">
                                            <p style="display: block; margin-bottom: 5px; font-size: 15px;"><b>Sueldo Mensual: </b>Q. <span t-esc="('%.' + str(2) + 'f') % doc.employeeid.contract_ids.wage"/></p>
                                        </td>
                                        <table style="width: 100%;">
                                            <tr>
                                                <td style="width: 33%; text-align: left;">
                                                    <p style="margin-bottom: 5px; font-size: 15px;"><b>Días Gozados:</b><span t-esc="('%.' + str(0) + 'f') % doc.vac"/></p> 
                                                </td>
                                                <td style="width: 33%; text-align: center;">
                                                    <p style="margin-bottom: 5px; font-size: 15px;">(SUELDO M. / 31) X D. GOZADOS</p>
                                                </td>
                                                <td style="width: 33%; text-align: right;">
                                                    <p style="margin-bottom: 20px; font-size: 15px;"><b>Total a Pagar:</b> Q. <span t-esc="('%.' + str(2) + 'f') % doc.tot_vac"/></p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </div>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <p style="display: block; margin-bottom: 15px; font-size: 15px; text-align: center; color: blue;">DETALLE</p>
                                </td>
                            </tr>
                        </div>
                        <td colspan="6" style="margin-bottom: 800px;">
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th style="padding: 10px; text-align: center;">Periodo</th>
                                        <th style="padding: 10px; text-align: center;">Fecha Desde</th>
                                        <th style="padding: 10px; text-align: center;">Fecha Hasta</th>
                                        <th style="padding: 10px; text-align: center;">Días</th>
                                        <th style="padding: 10px; text-align: center;">Tipo de Ausencia</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="doc.vac_list" t-as="line">
                                        <td style="padding: 10px; text-align: center;"><span t-field="line.name"/></td>
                                        <td style="padding: 10px; text-align: center;"><span t-field="line.date_from" t-options='{"widget": "date"}'/></td>
                                        <td style="padding: 10px; text-align: center;"><span t-field="line.date_to" t-options='{"widget": "date"}'/></td>
                                        <td style="padding: 10px; text-align: center;"><span t-esc="('%.' + str(0) + 'f') % line.number_of_days"/></td>
                                        <td style="padding: 10px; text-align: center;"><span t-field="line.holiday_status_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"></td>
                                        <td style="padding: 10px; text-align: center;">Total días</td>
                                        <td style="padding: 10px; text-align: center;"><t t-esc="int(sum(doc.vac_list.mapped('number_of_days')))"/></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                        <tr>
                            <td colspan="2">
                                <div style="float: left;">
                                    <td colspan="2">
                                        <p style="display: block; margin-top: 10px; margin-bottom: 5px; font-size: 15px;"><b>Recibi de:</b> <t t-esc="doc.employeeid.address_id.name"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="display: block; margin-bottom: 10px; font-size: 15px;"><b>La cantidad de:</b> Q. <span t-esc="('%.' + str(2) + 'f') % doc.tot_vac"/></p>
                                    </td>
                                </div>
                                <div style="clear: both;">
                                    <td colspan="2">
                                            <p style="display: block; margin-bottom: 70px; font-size: 12px; text-align: justify;">Con el recibo del presente, declaro completamente 
                                            liquidado mi periodo de vacaciones con la empresa. Por lo cual no tengo ningún tipo de reclamo 
                                            de carácter laboral, civil o cualquier otra naturaleza que hacer contra "<t t-esc="doc.employeeid.address_id.name"/>" y como  consecuencia otorgo a favor 
                                            de la citada empresa el más amplio total y eficaz  documento de liquidación de vacaciones.</p>
                                    </td>
                                </div>
                                <div style="float: center;">
                                    <td colspan="2">
                                        <p style="margin-bottom: 5px; font-size: 10px; text-align: center;">_________________________________________</p>
                                    </td>
                                    <td colspan="2">
                                        <p style="margin-bottom: 2px; font-size: 10px; text-align: center;">FIRMA DEL TRABAJADOR</p>
                                    </td>
                                    <td colspan="2">
                                        <p style="margin-bottom: 2px; font-size: 10px;text-align: center;"><t t-esc="doc.employeeid.name"/></p>
                                    </td>
                                    <td colspan="2">
                                        <p style="margin-bottom: 5px; font-size: 10px;text-align: center;"><t t-esc="doc.employeeid.identification_id"/></p>
                                    </td>
                                </div>
                            </td>
                                
                        </tr>

                    </t>
                </div>
            </t>
        </t>
    </template>
</odoo>